<head>
  <meta name="description" content="Демо звонок" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title></title>
  <link
    rel="icon"
    href="https://248305.selcdn.ru/demo_bot_static/just-ai-logo.png"
  />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="detectWebRTC.min.js"></script>
  <script src="jssip.min.js"></script>
  <script src="widget.min.js"></script>
  <link rel="stylesheet" href="style.min.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="widget">
    <div id="myZadarmaCallmeWidget"></div>
  </div>
  <div id="info" style="visibility: hidden;">
    <img id="avatar" src="https://248305.selcdn.ru/demo_bot_static/solvi-webapp-avatar.png"/>
    <div id="keyword">
      <p><b>Кодовое слово:</b></p>
      <p id="user-keyword"></p>
    </div>
  </div>

  <script>
    function getParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param)
    }

    var myZadarmaCallmeWidget;
    var widgetInfo = {
      test: {
        widgetId: "u4gg6PJ241Rzsn7erLr6B2G3YMt5vFG4NMBkE55pc6s4d79gpN8H3g9sbm5dsC4Jdbcj2fbSdNJzstv7xczsjrxbAbcgUsCk4ce252af2e8884086d16656084540693",
        sipId: "947897",
      },
      prod: {
        widgetId: "zcrHDvjey3xr59kFDt259NpPj6ey6h3xs3c52p61EaRcSvSBeTuVrpEZfufbdjcnHze6vxj5Uh4cs3M4jBZv3SCJBb7x193n32a0ceb4a1fbf7068cc0a5a21bfda1fb",
        sipId: "787438"
      },
      yandex: {
        widgetId: "9uc89shB3fHha5eAtr6Kb96aDxmKDmD2LTznyejM347yTGLcjk4gg2fRSUzXyugB3x1Zu8NGuvs222uf519ec7VhaFdvsnay706f848b3d137d3f815a34b2f2720b44",
        sipId: "763767"
      }
    }
    if (getParam("asr") === "yandex") {
      widgetInfo = widgetInfo.yandex
    } else {
      widgetInfo = getParam("test") ? widgetInfo.test : widgetInfo.prod;
    }

    var myZadarmaCallmeWidgetFn = function () {
      window.Telegram.WebApp.setBackgroundColor("#FFFFFF")

      var keyword = getParam("keyword")
      if (keyword) {
        var infoDiv = document.getElementById("info")
        infoDiv.style.visibility = "visible"
        userKeyword = document.getElementById("user-keyword")
        userKeyword.innerHTML = keyword
      }
      myZadarmaCallmeWidget = new ZadarmaCallmeWidget(
        "myZadarmaCallmeWidget"
      );
      myZadarmaCallmeWidget.create(
        {
          widgetId: widgetInfo.widgetId,
          sipId: widgetInfo.sipId,
          domElement: "myZadarmaCallmeWidget",
        },
        {
          language: "ru",
          shape: "square",
          width: "0",
          dtmf: false,
          font: "'Trebuchet MS','Helvetica CY',sans-serif",
          color_call: "rgb(255, 255, 255)",
          color_bg_call: "rgb(126, 211, 33)",
          color_border_call: "rgb(191, 233, 144)",
          color_connection: "rgb(255, 255, 255)",
          color_bg_connection: "rgb(33, 211, 166)",
          color_border_connection: "rgb(144, 233, 211)",
          color_calling: "rgb(255, 255, 255)",
          color_border_calling: "rgb(255, 218, 128)",
          color_bg_calling: "rgb(255, 181, 0)",
          color_ended: "rgb(255, 255, 255)",
          color_bg_ended: "rgb(164,164,164)",
          color_border_ended: "rgb(210, 210, 210)",
        }
      );
    };

    if (window.addEventListener) {
      window.addEventListener("load", myZadarmaCallmeWidgetFn, false);
    } else if (window.attachEvent) {
      window.attachEvent("onload", myZadarmaCallmeWidgetFn);
    }
  </script>

  <div id="zadarmaScripts"></div>
  <script>
    (function () {
      var script = document.createElement("script");
      script.src = "https://my.zadarma.com/callmewidget/v2.0.8/loader.js";
      document.getElementById("zadarmaScripts").appendChild(script);
    })();
  </script>
</body>
